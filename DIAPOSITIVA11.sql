


CREATE SEQUENCE SEQ_ID

START WITH 300

INCREMENT BY 10

NOCACHE

NOCYCLE;

/

CREATE OR REPLACE TYPE MIOBJETO AS OBJECT(

 ID NUMBER,

 NOMBRE VARCHAR2(20),

 CONSTRUCTOR FUNCTION MIOBJETO RETURN SELF AS RESULT,

 CONSTRUCTOR FUNCTION MIOBJETO(V_NOMBRE VARCHAR2) RETURN SELF AS RESULT,

 MEMBER FUNCTION INSERTA_ESTUDIANTE(V_NOMBRE VARCHAR2) RETURN VARCHAR2

);

/

CREATE TABLE ESTUDIANTE OF MIOBJETO;

/

CREATE OR REPLACE TYPE BODY MIOBJETO 

AS

 CONSTRUCTOR FUNCTION MIOBJETO RETURN SELF AS RESULT

 IS

 EJEM_MIOBJETO MIOBJETO := MIOBJETO(NULL,NULL);

 BEGIN

  SELF := EJEM_MIOBJETO;

  RETURN;

 END MIOBJETO;

  

 CONSTRUCTOR FUNCTION MIOBJETO(V_NOMBRE VARCHAR2) RETURN SELF AS RESULT

 IS

 EJEM_MIOBJETO MIOBJETO := MIOBJETO(SEQ_ID.NEXTVAL,V_NOMBRE);

 BEGIN

  SELF := EJEM_MIOBJETO;

  RETURN;

 END MIOBJETO;

  

 MEMBER FUNCTION INSERTA_ESTUDIANTE(V_NOMBRE VARCHAR2)

 RETURN VARCHAR2

 IS

 EJEM_MIOBJETO MIOBJETO := MIOBJETO(SEQ_ID.NEXTVAL,V_NOMBRE);

 v_message VARCHAR2(70):='ERROR EN LA INSERCION';

 BEGIN

  INSERT INTO ESTUDIANTE VALUES EJEM_MIOBJETO;

  IF SQL%ROWCOUNT>0 THEN

   v_message:='REGISTRO INSERTADO CORRECTAMENTE!';

  END IF;

  COMMIT;

  RETURN v_message;

 END INSERTA_ESTUDIANTE;

END;

/

DECLARE

 E1 MIOBJETO;

 v_mensaje VARCHAR(70);

BEGIN

 E1:= MIOBJETO;

 v_mensaje:=E1.INSERTA_ESTUDIANTE('LENIN');

 DBMS_OUTPUT.PUT_LINE(v_mensaje);

END;

/

